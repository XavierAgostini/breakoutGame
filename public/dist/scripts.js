"use strict";function draw(){ctx.clearRect(0,0,canvasWidth,canvasHeight),ctx.fillStyle="black",paddlePosition(),ctx.fillRect(paddle.posX,paddle.posY,paddle.width,paddle.height),ballPhysics(),refreshBlocks(blocks),ctx.beginPath(),ctx.arc(ball.posX,ball.posY,ball.radius,0,2*Math.PI,!1),ctx.fillStyle="white",ctx.fill(),ctx.stroke(),updateScore()}function generateInitialBlocks(){for(var l=blockWidth,e=blockHeight,a=0,t=0,o=0,s=[],i=0;i<5;i++){a=12,t+=e+5;for(var c=0;c<10;c++)ctx.fillStyle=blockColors[i],ctx.fillRect(a,t,l,e),s.push({id:o,posX:a,posY:t,color:blockColors[i],level:i,active:!0}),a+=l+5,o++}return s}function refreshBlocks(l){for(var e=0,a=0;a<l.length;a++)blockHit(l[a])&&(gameComplete()&&gameOver(),e++,e>1&&(ball.velY*=-1)),l[a].active&&(ctx.fillStyle=l[a].color,ctx.fillRect(l[a].posX,l[a].posY,blockWidth,blockHeight))}function blockHit(l){var e=!1,a=blocks[blocks.length-1].posY+blockHeight;if(ball.posY-ball.radius<=a&&l.active)for(var t=({x:ball.posX,y:ball.posY-ball.radius},{x:ball.posX+ball.radius,y:ball.posY},{x:ball.posX,y:ball.posY+ball.radius},{x:ball.posX-ball.radius,y:ball.posY},0);t<360;t++){var o=ball.posX+ball.radius*Math.cos(t*Math.PI/180),s=ball.posY-ball.radius*Math.sin(t*Math.PI/180);if(o>=l.posX&&o<=l.posX+blockWidth&&s<=l.posY+blockHeight&&s>=l.posY){e=!0,ball.velY*=-1,score+=40-10*l.level+1;break}}return!!e&&(blocks[l.id].active=!1,!0)}function paddlePosition(){paddle.posX+=paddle.velX*interval,paddle.posX=paddle.posX>=canvasWidth-paddle.width?canvasWidth-paddle.width:paddle.posX,paddle.posX=paddle.posX<=0?0:paddle.posX}function ballPhysics(){if(ball.posY+=ball.velY*interval,ball.posX+=ball.velX*interval,ball.posY+ball.radius>=canvasHeight&&(console.log("bottom wall hit"),lifeLost()),ball.posY-ball.radius<=0&&(console.log("top wall hit"),ball.velY*=-1),ball.posX+ball.radius>=canvasWidth&&(console.log("right wall hit"),ball.velX*=-1),ball.posX-ball.radius<=0&&(console.log("left wall hit"),ball.velX*=-1),ball.posY>=canvasHeight-paddleHeight-paddleHeightOffset&&ball.posX-ball.radius<=paddle.posX+paddle.width&&ball.posX+ball.radius>=paddle.posX){console.log("paddle hit"),ball.velY*=-1;var l=ball.posX/(paddle.posX+.5*paddle.width)-1;ball.velX=l>.5?.5:l}}function updateScore(){var l="Score: "+score,e="Lives: "+numLives;ctx.font="30px sans-serif",ctx.fillText(l,10,50),ctx.fillText(e,350,50)}function lifeLost(){numLives--,0==numLives&&gameOver(),ball.posY=ballStart}function gameComplete(){for(var l=0;l<blocks.length;l++)if(blocks[l].active)return!1;return!0}function gameOver(){console.log("Game Over"),clearInterval(game),setTimeout(function(){ctx.clearRect(0,0,canvasWidth,canvasHeight);var l=localStorage.getItem("highScore");score>l?highScore=score:highScore,localStorage.setItem("highScore",highScore),newGameBtn.style.display="inline";var e="GAME OVER",a="Your Score: "+score,t="Your High score: "+highScore;ctx.font="30px sans-serif",ctx.fillText(e,150,50),ctx.fillText(a,150,150),ctx.fillText(t,150,200)},interval)}var canvas=document.getElementById("myCanvas"),canvasOffset=canvas.getBoundingClientRect().left;console.log("offset-left: ",canvasOffset);var canvasHeight=800,canvasWidth=500,ctx=canvas.getContext("2d"),interval=10,blockColors=["red","#064df1","#33f106","#8037dd","yellow"],blockWidth=43,blockHeight=25,blocks=generateInitialBlocks(),paddleHeight=15,paddleHeightOffset=40,paddleSpeed=.5,paddle={posX:(canvasWidth-50)/2,posY:canvasHeight-paddleHeightOffset,velX:0,velY:0,width:100,height:15},ballStart=200,ball={radius:10,posX:400,posY:ballStart,accelX:0,accelY:0,velX:0,velY:.2},score=0,numLives=1,highScore=localStorage.getItem("highScore")||0,newGameBtn=document.getElementById("newGameBtn"),game=setInterval(draw,interval);canvas.addEventListener("mousemove",function(l){var e=l.clientX-canvasOffset;l.clientY;paddle.posX=e}),document.addEventListener("keydown",function(l){37==l.keyCode?paddle.velX=-paddleSpeed:39==l.keyCode&&(paddle.velX=paddleSpeed)}),document.addEventListener("keyup",function(l){37!=l.keyCode&&39!=l.keyCode||(paddle.velX=0)}),newGameBtn.addEventListener("click",function(l){newGameBtn.style.display="none",blocks=generateInitialBlocks(),numLives=1,score=0,game=setInterval(draw,interval)});
"use strict";console.log("working");var x=[1,2,3];x=x.map(function(o){return o+1}),console.log(x);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJyZWFrb3V0LmpzIiwidGVzdC5qcyJdLCJuYW1lcyI6WyJkcmF3IiwiY3R4IiwiY2xlYXJSZWN0IiwiY2FudmFzV2lkdGgiLCJjYW52YXNIZWlnaHQiLCJmaWxsU3R5bGUiLCJwYWRkbGVQb3NpdGlvbiIsImZpbGxSZWN0IiwicGFkZGxlIiwicG9zWCIsInBvc1kiLCJ3aWR0aCIsImhlaWdodCIsImJhbGxQaHlzaWNzIiwiYmxvY2tzIiwiYmVnaW5QYXRoIiwiZmlsbCIsImJhbGwiLCJyYWRpdXMiLCJNYXRoIiwiUEkiLCJzdHJva2UiLCJ1cGRhdGVTY29yZSIsImJsb2NrV2lkdGgiLCJpbmRleCIsImJsb2NrSGVpZ2h0IiwiYmxvY2tBcnJheSIsImkiLCJibG9ja0NvbG9ycyIsImoiLCJwdXNoIiwiaWQiLCJjb2xvciIsImxldmVsIiwiYWN0aXZlIiwicmVmcmVzaEJsb2NrcyIsIm11bHRpSGl0cyIsImdhbWVDb21wbGV0ZSIsImdhbWVPdmVyIiwiYmxvY2tIaXQiLCJ2ZWxZIiwicmVjdCIsImJsb2NrU2VjdGlvbiIsImxlZnQiLCJ4IiwieSIsInNpbiIsImhpdCIsInNjb3JlIiwidmVsWCIsImludGVydmFsIiwibGlmZUxvc3QiLCJjb25zb2xlIiwibG9nIiwic3BlZWQiLCJwYWRkbGVIZWlnaHQiLCJwYWRkbGVIZWlnaHRPZmZzZXQiLCJsaXZlTWVzc2FnZSIsIm51bUxpdmVzIiwiZmlsbFRleHQiLCJzY29yZU1lc3NhZ2UiLCJiYWxsU3RhcnQiLCJmb250IiwiY2xlYXJJbnRlcnZhbCIsImxlbmd0aCIsImN1cnJIaWdoU2NvcmUiLCJsb2NhbFN0b3JhZ2UiLCJtZXNzYWdlMSIsIm1lc3NhZ2UyIiwic2V0VGltZW91dCIsIm1lc3NhZ2UzIiwiZ2V0SXRlbSIsImhpZ2hTY29yZSIsIm5ld0dhbWVCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwic3R5bGUiLCJkaXNwbGF5IiwiZ2FtZSIsInNldEludGVydmFsIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNhbnZhc09mZnNldCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImdlbmVyYXRlSW5pdGlhbEJsb2NrcyIsInBhZGRsZVNwZWVkIiwiYWNjZWxYIiwiYWNjZWxZIiwiZXZlbnQiLCJjbGllbnRYIiwia2V5Q29kZSIsIm4iXSwibWFwcGluZ3MiOiJZQXFDQSxTQUFTQSxRQUVSQyxJQUFJQyxVQUFVLEVBQUcsRUFBR0MsWUFBYUMsY0FHakNILElBQUlJLFVBQVksUUFDaEJDLGlCQUdBTCxJQUFJTSxTQUFTQyxPQUFPQyxLQUFNRCxPQUFPRSxLQUFNRixPQUFPRyxNQUFPSCxPQUFPSSxRQUk1REMsY0FHQVosY0FBQWEsUUFBQWIsSUFBSWMsWUFNSmQsSUFBSWUsSUFBSkMsS0FBQVIsS0FBQVEsS0FBQVAsS0FBQU8sS0FBQUMsT0FBQSxFQUFBLEVBQUFDLEtBQUFDLElBQUEsR0FDQW5CLElBQUlvQixVQUFKLFFBREFwQixJQUFJZSxPQUdKZixJQUFBb0IsU0FDQUMsY0FVQSxRQUFJWix5QkFRRlQsSUFBQUEsR0FYRVUsR0FBUVksV0FLUkMsRUFBSkMsWUFDSUMsRUFBQUEsRUFDSmhCLEVBQVFpQixFQUVQakIsRUFBUUUsRUFDUmMsS0FDS3JCLEVBQUFBLEVBQUpzQixFQUFnQkMsRUFBQUEsSUFBQUEsQ0FDaEIzQixFQUFJTSxHQUNKbUIsR0FBQUEsRUFBZ0IsQ0FDaEJqQixLQUFBQSxHQUFBQSxHQUFRRSxFQUFBQSxFQUFSLEdBQUFrQixJQUNBTCxJQUFBQSxVQUFBQSxZQUFBQSxHQUNBdkIsSUFBQU0sU0FBQUUsRUFBQUMsRUFBQUMsRUFBQUMsR0FDRGMsRUFBQUksTUFBQUMsR0FBQVAsRUFBQWYsS0FBQUEsRUFBQUMsS0FBQUEsRUFBQXNCLE1BQUFKLFlBQUFELEdBQUFNLE1BQUFOLEVBQUFPLFFBQUEsSUFDRHpCLEdBQU9pQixFQUFQLEVBQ0FGLElBR0QsTUFBQUUsR0FJRSxRQUFBUyxlQUFBVCxHQUVDLElBQUEsR0FERFUsR0FBWVYsRUFDUlcsRUFBQUEsRUFBQUEsRUFBQUEs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XG52YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteUNhbnZhc1wiKTtcbnZhciBjYW52YXNPZmZzZXQgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbmNvbnNvbGUubG9nKFwib2Zmc2V0LWxlZnQ6IFwiLCBjYW52YXNPZmZzZXQpO1xuLy9jb25zb2xlLmxvZyhyZWN0LnRvcCwgcmVjdC5yaWdodCwgcmVjdC5ib3R0b20sIHJlY3QubGVmdCk7XG52YXIgY2FudmFzSGVpZ2h0ID0gODAwOyAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlDYW52YXNcIikuZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpO1xudmFyIGNhbnZhc1dpZHRoID0gNTAwOyAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlDYW52YXNcIikuZ2V0QXR0cmlidXRlKFwid2lkdGhcIik7XG52YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbnZhciBpbnRlcnZhbCA9IDEwO1xuXG5cbi8vIEJsb2NrIFBhcmFtZXRlcnNcbnZhciBibG9ja0NvbG9ycyA9IFsncmVkJywgJyMwNjRkZjEnLCAnIzMzZjEwNicsICcjODAzN2RkJywgJ3llbGxvdyddO1xudmFyIGJsb2NrV2lkdGggPSA0MztcbnZhciBibG9ja0hlaWdodCA9IDI1O1xuLy8gZGljdGlvbmFyeSBvZiBibG9jayBbe2lkLCBwb3NYLCBwb3NZLCBjb2xvciwgbGV2ZWwsIGFjdGl2ZX1dXG52YXIgYmxvY2tzID0gZ2VuZXJhdGVJbml0aWFsQmxvY2tzKCk7XG5cblxuLy8gUGFkZGxlIFBhcmFtdGVyc1xudmFyIHBhZGRsZUhlaWdodCA9IDE1O1xudmFyIHBhZGRsZUhlaWdodE9mZnNldCA9IDQwO1xudmFyIHBhZGRsZVNwZWVkID0gMC41O1xudmFyIHBhZGRsZSA9IHtwb3NYOiAoY2FudmFzV2lkdGggLSA1MCkvMiwgcG9zWTogY2FudmFzSGVpZ2h0IC0gcGFkZGxlSGVpZ2h0T2Zmc2V0LCB2ZWxYOiAwLCB2ZWxZOiAwLCB3aWR0aDogMTAwLCBoZWlnaHQ6IDE1fTtcblxuLy9iYWxsIHBhcmFtZXRlcnM6IHJhZGl1ZXMsIHgtcG9zaXRpb24sIHktcG9zaXRpb24sIHgtYWNjZWxlcmF0aW9uLCB5LWFjY2VsZXJhdG9pbiwgeC12ZWxvY3R5LCB5LXZlbG9jaXR5XG52YXIgYmFsbFN0YXJ0ID0gMjAwO1xudmFyIGJhbGwgPSB7cmFkaXVzOiAxMCwgcG9zWDogNDAwLCBwb3NZOiBiYWxsU3RhcnQsIGFjY2VsWDogMCwgYWNjZWxZOiAwLCB2ZWxYOiAwLCB2ZWxZOiAwLjJ9O1xuXG4vLyBJbml0aWFsZSBTY29yZVxudmFyIHNjb3JlID0gMDtcbnZhciBudW1MaXZlcyA9IDE7XG52YXIgaGlnaFNjb3JlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJoaWdoU2NvcmVcIikgfHwgMDtcbnZhciBuZXdHYW1lQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXdHYW1lQnRuXCIpO1xuLy8gUmVkcmF3IGNhbnZhcyAyMHgvcyAtPjEvNjAgPSAwLjA1cyA9IDUwbXNcbnZhciBnYW1lID0gc2V0SW50ZXJ2YWwoZHJhdywgaW50ZXJ2YWwpO1xuXG5mdW5jdGlvbiBkcmF3KCkge1xuXHQvL2NsZWFyIGNhbnZhcyBiZWZvcmUgcmVkcmF3aW5nXG5cdGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XG5cblx0Ly9kcmF3IHBhZGRsZVxuXHRjdHguZmlsbFN0eWxlID0gJ2JsYWNrJztcblx0cGFkZGxlUG9zaXRpb24oKTtcblx0Ly9wYWRkbGUucG9zWCArPSBwYWRkbGUudmVsWCppbnRlcnZhbDtcblx0Ly9wYWRkbGUudmVsWCA9IDA7XG5cdGN0eC5maWxsUmVjdChwYWRkbGUucG9zWCwgcGFkZGxlLnBvc1ksIHBhZGRsZS53aWR0aCwgcGFkZGxlLmhlaWdodCk7XG5cblx0XG5cdFxuXHRiYWxsUGh5c2ljcygpO1xuXHRyZWZyZXNoQmxvY2tzKGJsb2Nrcyk7XG5cblx0Y3R4LmJlZ2luUGF0aCgpO1xuXHQvL2RyYXcgYmFsbFxuXG5cdC8vY2VudGVyKHgseSksIHN0YXJ0IHJhZGlhbiwgZW5kIHJhZGlhblxuXHRjdHguYXJjKGJhbGwucG9zWCwgYmFsbC5wb3NZLCBiYWxsLnJhZGl1cywgMCAsIDIqTWF0aC5QSSwgZmFsc2UpO1xuXHRjdHguZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xuXHRjdHguZmlsbCgpO1xuXHRjdHguc3Ryb2tlKCk7XG5cblx0Ly8gU2NvcmVcblx0dXBkYXRlU2NvcmUoKTtcblxuXG59XG5cbi8vIGdlbmVyYXRlIGJsb2NrcyBvbiBjYW52YXMgYW5kIHB1c2ggaW50byBibG9jayBkaWN0aW9uYXJ5XG5mdW5jdGlvbiBnZW5lcmF0ZUluaXRpYWxCbG9ja3MoKSB7XG5cdHZhciB3aWR0aCA9IGJsb2NrV2lkdGg7XG5cdHZhciBoZWlnaHQgPSBibG9ja0hlaWdodDtcblx0dmFyIHBvc1ggPSAwO1xuXHR2YXIgcG9zWSA9IDA7XG5cblx0dmFyIGluZGV4ID0gMDtcblx0dmFyIGJsb2NrQXJyYXkgPSBbXVxuXHRmb3IodmFyIGkgPSAwOyBpIDwgNTsgaSsrKSB7XG5cdFx0cG9zWCA9IDEyO1xuXHRcdHBvc1kgKz0gaGVpZ2h0ICsgNTtcblx0XHRmb3IodmFyIGogPSAwOyBqIDwgMTA7IGorKykge1x0XG5cdFx0XHRjdHguZmlsbFN0eWxlID0gYmxvY2tDb2xvcnNbaV07XG5cdFx0XHRjdHguZmlsbFJlY3QocG9zWCwgcG9zWSwgd2lkdGgsIGhlaWdodCk7XG5cdFx0XHRibG9ja0FycmF5LnB1c2goe2lkOiBpbmRleCwgcG9zWDogcG9zWCwgcG9zWTogcG9zWSwgY29sb3I6IGJsb2NrQ29sb3JzW2ldLCBsZXZlbDogaSwgYWN0aXZlOiB0cnVlfSk7XG5cdFx0XHRwb3NYICs9IHdpZHRoICsgNTtcblx0XHRcdGluZGV4Kys7XG5cdFx0fSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXHR9ICAgICAgICAgICAgIFxuXHRyZXR1cm4gYmxvY2tBcnJheTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbn1cblxuLy9yZXJlbmRlciBibG9ja3NcbmZ1bmN0aW9uIHJlZnJlc2hCbG9ja3MoYmxvY2tBcnJheSkge1xuXHR2YXIgbXVsdGlIaXRzID0gMDtcblx0Zm9yKHZhciBpID0gMDsgaSA8IGJsb2NrQXJyYXkubGVuZ3RoOyBpKyspIHtcblx0XHQvL2NoZWNrIGlmIGJsb2NrIGhpdCBieSBiYWxsXG5cdFx0Ly9pZiBiYWxsIGhpdHMgbXVsdGlwbGUgYmxvY2tzIGF0IHNhbWUgdGltZSwgd2FudCB0byBjYW5jZWwgdGhlIGRvdWJsZSBuZWdhdGlvblxuXHRcdGlmKGJsb2NrSGl0KGJsb2NrQXJyYXlbaV0pKSB7XG5cdFx0XHRpZihnYW1lQ29tcGxldGUoKSkgZ2FtZU92ZXIoKTtcblx0XHRcdG11bHRpSGl0cysrO1xuXHRcdFx0aWYobXVsdGlIaXRzID4gMSkgYmFsbC52ZWxZICo9IC0xO1xuXHRcdH1cblx0XHRcblx0XHQvL29ubHkgcmVuZGVyIGJsb2NrcyB0aGF0IGhhdmUgYmVlbiBoaXRcblx0XHRpZihibG9ja0FycmF5W2ldLmFjdGl2ZSkge1xuXHRcdFx0Y3R4LmZpbGxTdHlsZSA9IGJsb2NrQXJyYXlbaV0uY29sb3I7XG5cdFx0XHRjdHguZmlsbFJlY3QoYmxvY2tBcnJheVtpXS5wb3NYLCBibG9ja0FycmF5W2ldLnBvc1ksIGJsb2NrV2lkdGgsIGJsb2NrSGVpZ2h0KTtcblx0XHR9XHRcdFxuXHR9XG59XG5cbi8vIENoZWNrIGlmIGJhbGwgaGl0cyBibG9jayBoZWxwZXIgbWV0aG9kXG5mdW5jdGlvbiBibG9ja0hpdChyZWN0KSB7XG5cdHZhciBoaXQgPSBmYWxzZTtcblx0dmFyIGJsb2NrU2VjdGlvbiA9IGJsb2Nrc1tibG9ja3MubGVuZ3RoIC0xIF0ucG9zWSArIGJsb2NrSGVpZ2h0O1xuXHQvL2lmIGJhbGwgaXMgaW4gdGhlIHRvcCBvZiB0aGUgc2NyZWVuXG5cblx0aWYoYmFsbC5wb3NZIC0gYmFsbC5yYWRpdXMgPD0gYmxvY2tTZWN0aW9uICYmIHJlY3QuYWN0aXZlKSB7XG5cdFx0dmFyIHRvcCA9IHt4OiBiYWxsLnBvc1gsIHk6IGJhbGwucG9zWSAtIGJhbGwucmFkaXVzfTtcblx0XHR2YXIgcmlnaHQgPSB7eDogYmFsbC5wb3NYICsgYmFsbC5yYWRpdXMsIHk6IGJhbGwucG9zWX07XG5cdFx0dmFyIGJvdHRvbSA9IHt4OiBiYWxsLnBvc1gsIHk6IGJhbGwucG9zWSArIGJhbGwucmFkaXVzfTtcblx0XHR2YXIgbGVmdCA9IHt4OiBiYWxsLnBvc1ggLSBiYWxsLnJhZGl1cywgeTogYmFsbC5wb3NZfTtcblx0XHQvL2l0ZXJhdGUgb3ZlciB0aGUgY2lyY3VtZmVyZW5jZSBvZiB0aGUgYmFsbCBhbmQgY2hlY2sgaWYgYW55IG9mIHRoZSBwb2ludHMgYXJlIGluc2lkZSB0aGUgcmVjdGFuZ2xlXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IDM2MDsgaSsrKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cdFx0XHR2YXIgeCA9IGJhbGwucG9zWCArIGJhbGwucmFkaXVzICogTWF0aC5jb3MoaSAqIE1hdGguUEkvMTgwKTtcblx0XHRcdHZhciB5ID0gYmFsbC5wb3NZIC0gIGJhbGwucmFkaXVzICogTWF0aC5zaW4oaSAqIE1hdGguUEkvMTgwKTtcblxuXHRcdFx0aWYoeCA+PSByZWN0LnBvc1ggJiYgeCA8PSByZWN0LnBvc1ggKyBibG9ja1dpZHRoKSB7XG5cdFx0XHRcdGlmKHkgPD0gcmVjdC5wb3NZICsgYmxvY2tIZWlnaHQgJiYgeSA+PSByZWN0LnBvc1kpIHtcblx0XHRcdFx0XHRoaXQgPSB0cnVlO1xuXHRcdFx0XHRcdGJhbGwudmVsWSAqPSAtMTtcblx0XHRcdFx0XHRzY29yZSArPSAoNDAgLSAxMCpyZWN0LmxldmVsICsgMSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XHRcdFxuXHR9XG5cdGlmKGhpdCkge1xuXHRcdGJsb2Nrc1tyZWN0LmlkXS5hY3RpdmUgPSBmYWxzZTtcblx0XHRyZXR1cm4gdHJ1ZVxuXHR9IFxuXHRyZXR1cm4gZmFsc2U7XHRcbn1cblxuXG5cbi8vIEV2ZW50IEhhbmRsZXJzIGZvciBwYWRkbGUgY29udHJvbFxuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24oZXZlbnQpIHtcblx0dmFyIHggPSBldmVudC5jbGllbnRYIC0gY2FudmFzT2Zmc2V0O1xuXHR2YXIgeSA9IGV2ZW50LmNsaWVudFk7XG5cdHBhZGRsZS5wb3NYID0geDtcblx0Ly9jb25zb2xlLmxvZygnbTogJywgeCk7XG59KTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdC8vIG1vdmUgcGFkZGxlIHBvcyBsZWZ0IGlmIGxlZnQgYnV0dG9uIHByZXNzZWRcblx0aWYoZXZlbnQua2V5Q29kZSA9PSAzNykge1xuXHRcdHBhZGRsZS52ZWxYID0gLXBhZGRsZVNwZWVkO1xuXHRcdC8vIGNvbnNvbGUubG9nKCd0Jyk7XG5cdH1cblx0Ly9tb3ZlIHBhZGRsZSBwb3MgcmlnaHQgaWYgcmlnaHQgYnV0dG9uIHByZXNzZWRcblx0ZWxzZSBpZihldmVudC5rZXlDb2RlID09IDM5KSB7XG5cdFx0cGFkZGxlLnZlbFggPSBwYWRkbGVTcGVlZDtcblx0fVxufSk7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZnVuY3Rpb24oZXZlbnQpIHtcblx0Ly8gbW92ZSBwYWRkbGUgcG9zIGxlZnQgaWYgbGVmdCBidXR0b24gcHJlc3NlZFxuXHRpZihldmVudC5rZXlDb2RlID09IDM3IHx8IGV2ZW50LmtleUNvZGUgPT0gMzkpIHtcblx0XHRwYWRkbGUudmVsWCA9IDA7XG5cdH1cblx0XG59KTtcbmZ1bmN0aW9uIHBhZGRsZVBvc2l0aW9uKCkge1xuXHRwYWRkbGUucG9zWCArPSBwYWRkbGUudmVsWCAqIGludGVydmFsO1xuXHRwYWRkbGUucG9zWCA9IHBhZGRsZS5wb3NYID49IGNhbnZhc1dpZHRoIC0gcGFkZGxlLndpZHRoID8gY2FudmFzV2lkdGggLSBwYWRkbGUud2lkdGggOiBwYWRkbGUucG9zWDtcblx0cGFkZGxlLnBvc1ggPSBwYWRkbGUucG9zWCA8PSAwID8gMCA6IHBhZGRsZS5wb3NYO1xufVxuXG5cblxuZnVuY3Rpb24gYmFsbFBoeXNpY3MoKSB7XG5cblx0Ly8gVXBkYXRlIEJhbGwgcG9zaXRpb25cblx0YmFsbC5wb3NZICs9IGJhbGwudmVsWSAqIGludGVydmFsO1xuXHRiYWxsLnBvc1ggKz0gYmFsbC52ZWxYICogaW50ZXJ2YWw7XG5cdFxuXHQvL2lmIGJhbGwgaGl0cyBib3R0b20gd2FsbFxuXHRpZihiYWxsLnBvc1kgKyBiYWxsLnJhZGl1cyA+PSBjYW52YXNIZWlnaHQpIHtcblx0XHRjb25zb2xlLmxvZygnYm90dG9tIHdhbGwgaGl0Jyk7XG5cdFx0bGlmZUxvc3QoKTtcblx0XHQvL2JhbGwudmVsWSAqPSAtMTtcblx0fVxuXG5cdC8vaWYgYmFsbCBoaXN0IHRvcCB3YWxsXG5cdGlmKGJhbGwucG9zWSAtIGJhbGwucmFkaXVzIDw9IDApIHtcblx0XHRjb25zb2xlLmxvZygndG9wIHdhbGwgaGl0Jyk7XG5cdFx0YmFsbC52ZWxZICo9IC0xO1xuXHR9XG5cblx0Ly9pZiB2YWxsIGhpdHMgcmlnaHQgd2FsbFxuXHRpZihiYWxsLnBvc1ggKyBiYWxsLnJhZGl1cyA+PSBjYW52YXNXaWR0aCkge1xuXHRcdGNvbnNvbGUubG9nKCdyaWdodCB3YWxsIGhpdCcpO1xuXHRcdGJhbGwudmVsWCAqPSAtMTtcblx0fVxuXG5cdC8vaWYgYmFsbCBoaXRzIGxlZnQgd2FsbFxuXHRpZihiYWxsLnBvc1ggLSBiYWxsLnJhZGl1cyA8PSAwKSB7XG5cdFx0Y29uc29sZS5sb2coJ2xlZnQgd2FsbCBoaXQnKTtcblx0XHRiYWxsLnZlbFggKj0gLTE7XG5cdH1cblxuXG5cdC8vYmFsbCBhdCBwYWRkbGUgbGV2ZWxcblx0aWYoYmFsbC5wb3NZID49IGNhbnZhc0hlaWdodCAtIHBhZGRsZUhlaWdodCAtIHBhZGRsZUhlaWdodE9mZnNldCkge1xuXHRcdC8vYmFsbCBoaXRzIHBhZGRsZVxuXHRcdGlmKChiYWxsLnBvc1ggLSBiYWxsLnJhZGl1cyA8PSBwYWRkbGUucG9zWCArIHBhZGRsZS53aWR0aCkgJiYgKGJhbGwucG9zWCArIGJhbGwucmFkaXVzID49IHBhZGRsZS5wb3NYKSkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJwYWRkbGUgaGl0XCIpO1xuXHRcdFx0YmFsbC52ZWxZICo9IC0xO1xuXHRcdFx0dmFyIHNwZWVkID0gYmFsbC5wb3NYLyhwYWRkbGUucG9zWCArIDAuNSpwYWRkbGUud2lkdGgpIC0gMTtcblx0XHRcdGJhbGwudmVsWCA9IHNwZWVkID4gMC41ID8gMC41IDogc3BlZWQ7MTBcblx0XHR9XG5cdH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZVNjb3JlKCkge1xuXHR2YXIgc2NvcmVNZXNzYWdlID0gXCJTY29yZTogXCIgKyBzY29yZSBcblx0dmFyIGxpdmVNZXNzYWdlID0gXCJMaXZlczogXCIgKyBudW1MaXZlcztcblx0Y3R4LmZvbnQgPSBcIjMwcHggc2Fucy1zZXJpZlwiO1xuXHRjdHguZmlsbFRleHQoc2NvcmVNZXNzYWdlLCAxMCwgNTApO1xuXHRjdHguZmlsbFRleHQobGl2ZU1lc3NhZ2UsIDM1MCwgNTApO1xuXHRcbn1cbmZ1bmN0aW9uIGxpZmVMb3N0KCkge1xuXHRudW1MaXZlcy0tO1xuXHRpZihudW1MaXZlcyA9PSAwKSB7XG5cdFx0Z2FtZU92ZXIoKTtcblx0fVxuXHRiYWxsLnBvc1kgPSBiYWxsU3RhcnQ7XG59XG5cbmZ1bmN0aW9uIGdhbWVDb21wbGV0ZSgpIHtcblx0Zm9yKHZhciBpID0gMDsgaSA8IGJsb2Nrcy5sZW5ndGg7IGkrKykge1xuXHRcdGlmKGJsb2Nrc1tpXS5hY3RpdmUpIHJldHVybiBmYWxzZTtcblx0fVxuXHRyZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGdhbWVPdmVyKCkge1xuXHRjb25zb2xlLmxvZyhcIkdhbWUgT3ZlclwiKTtcblx0Y2xlYXJJbnRlcnZhbChnYW1lKTtcblx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHQvLyBDbGVhciBDYW52YXNcblx0XHRjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQpO1xuXG5cdFx0XG5cblx0XHR2YXIgY3VyckhpZ2hTY29yZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiaGlnaFNjb3JlXCIpO1xuXHRcdHNjb3JlID4gIGN1cnJIaWdoU2NvcmUgPyBoaWdoU2NvcmUgPSBzY29yZSA6IGhpZ2hTY29yZTtcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImhpZ2hTY29yZVwiLCBoaWdoU2NvcmUpO1xuXHRcdG5ld0dhbWVCdG4uc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lXCI7XG5cdFx0XG5cdFx0dmFyIG1lc3NhZ2UxID0gXCJHQU1FIE9WRVJcIjtcblx0XHR2YXIgbWVzc2FnZTIgPSBcIllvdXIgU2NvcmU6IFwiICsgc2NvcmU7IFxuXHRcdHZhciBtZXNzYWdlMyA9IFwiWW91ciBIaWdoIHNjb3JlOiBcIiArIGhpZ2hTY29yZTtcblx0XHRcblx0XHRjdHguZm9udCA9IFwiMzBweCBzYW5zLXNlcmlmXCI7XG5cdFx0Y3R4LmZpbGxUZXh0KG1lc3NhZ2UxLCAxNTAsIDUwKTtcblx0XHRjdHguZmlsbFRleHQobWVzc2FnZTIsIDE1MCwgMTUwKTtcblx0XHRjdHguZmlsbFRleHQobWVzc2FnZTMsIDE1MCwgMjAwKTtcblx0fSwgaW50ZXJ2YWwpO1xuXHRcbn1cbm5ld0dhbWVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdG5ld0dhbWVCdG4uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRibG9ja3MgPSBnZW5lcmF0ZUluaXRpYWxCbG9ja3MoKTtcblx0bnVtTGl2ZXMgPSAxO1xuXHRzY29yZSA9IDA7XG5cdGdhbWUgPSBzZXRJbnRlcnZhbChkcmF3LCBpbnRlcnZhbCk7XG59KTtcbiIsImNvbnNvbGUubG9nKCd3b3JraW5nJyk7XG52YXIgeCA9IFsxLDIsM11cbnggPSB4Lm1hcChuID0+IG4gKyAxKTtcbmNvbnNvbGUubG9nKHgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
